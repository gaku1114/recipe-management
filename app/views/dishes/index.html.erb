<%= render "shared/header"%>

<div class="index-wrapper">
  <%# サイドバー %>
  <div class="index-sidebar">
    <div class="sidebar-top"><%= link_to 'ジャンル編集', genres_path, class:"visit-genre-index" %></div>
    <div class="sidebar-genre-wrapper">
        <li class="sidebar-genre_li"><%= link_to 'すべて', dishes_path, class:'sidebar-genre'%></ul>
        <% @genres.each do |genre| %>
          <li class="sidebar-genre_li"><%= link_to genre.name, dishes_path(id: genre.id), class:'sidebar-genre' %>
        <% end %>
    </div>
  </div>

  <%# 一覧 %>
  <div class="index-main">
    <div class="main-genre">
      <% if @genre.present? %>
        <%= @genre.name %>
        <div class="dishes-count"><%= "（ #{@dishes.count} ）" %></div>
      <% else %>
        <%= "すべて" %>
         <div class="dishes-count"><%= "（ #{@dishes.count} ）" %></div>
      <% end %>
    </div>
    <div class="main-dish-wrapper">
      <% @dishes.each do |dish| %>
        <% if @genre.present? %>
        <ul>
          <li class="main-dish_li"><%= link_to dish.dish_name, dishes_path(dish_id: dish.id, id: dish.genre_id), class:'main-dish' %></li>
        </ul>
        <% else %>
        <ul>
          <li class="main-dish_li"><%= link_to dish.dish_name, dishes_path(dish_id: dish.id), class:'main-dish' %></li>
        </ul>
        <% end %>
      <% end %>
    </div>
  </div>

  <%# 詳細 %>
  <div class="index-show">
    <% if @dish.present? %>
      <div class="show-dish-name">
        <%= @dish.dish_name %>
        <%= link_to image_tag("edit_icon.png", class:"dish-edit-icon"), edit_dish_path(@dish) %>
        <%= link_to image_tag("delete_icon.png", class:"dish-delete-icon"), dish_path(@dish), method: :delete %>
      </div>
      <div class="show-dish-url-wrapper">
        <%= link_to 'レシピサイトを見る', @dish.url, class:"show-dish-url", target: :_blank, rel: "noopener noreferrer"%>
      <div class="show-memo-wrapper">
        <%= simple_format(@dish.memo) %>
      </div>
    <% end %>
  </div>
</div>